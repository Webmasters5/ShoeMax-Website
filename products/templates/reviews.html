{% extends "BaseTemplate/nav.html" %}
{% load static %}

{% block title %}{{ shoe.name }} Reviews - Shoemax{% endblock %}
{% block extra_head %}
 <link rel="stylesheet" href="{% static 'css/review.css' %}">
{% endblock %}
{% block content %}
<body>
<div class="top">
    <div style=" width:40%;">
        <h1>{{shoe.name}}</h1>
        {% if avg_rating %}
        <div class="avg">Average Rating: {{ avg_rating }} / 5 ★</div>
        {% else %}
        <div class="avg">Average Rating: None</div>
        {% endif %}
        <a href="{% url 'products:review_product' shoe.shoe_id%}" class="button">Leave a review</a><br/>
    </div>
    <div style=" width: 20%; margin-right: 10%;">
        <img src="{{ shoe.image_url.url }}" alt="{{ shoe.name }}" style="width: 100%; height: auto; object-fit: cover; border-radius: 8px;">
    </div>
</div>
<br/><br/>
    {% if reviews %}
        {% for review in reviews %}
        <div class="review">
            <h2 style="margin-bottom: 0; margin-top: 1rem; margin-left: 1rem;">{{review.title}}</h2>
            <h3>- From {{review.order_item.order.customer.first_name}}</h3><br/>
            <p>{{review.comment}}</p><br>
            <h3 style="color: white; margin-bottom: 0.4rem;">Rating: {{review.rating}} / 5 ★</h3>
        </div>
        <br/>
        {% endfor%}
    {% else %}
    <div class="review">
     <p style="font-size: 1.6rem;">No reviews yet!</p>
     <p style="font-size: 1.6rem;">Be the first to leave a review</p>
    </div>
    {% endif %}
    <a class="cta-button" style="font-size: 1rem; margin-left: 3rem; margin-top: 3rem; display: inline-block;" href="{% url 'products:product_details' shoe.shoe_id %}">Back</a>
</body>
{% endblock %}