{% extends "base/nav.html" %}
{% load static %}

{% block title %}{{ shoe.name }} - ShoeMax{% endblock %}

{% block extra_head %}
  <meta name="author" content="ShoeMax Ltd." />
  <meta name="keywords" content="" />
  <meta name="description" content="Product details page for {{ shoe.name }}" />

  <link rel="stylesheet" href="{% static 'css/details.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  <nav class="breadcrumb">
    <a href="#">Home</a> /
    <a href="#">{{shoe.gender}}</a> /
    <span>{{shoe.category}}</span>
  </nav>

  <main class="product-container">
    <div class="product-gallery">
      <div class="main-image">
        {% if main_image %}
          <img src="{{ main_image.image.url }}" alt="{{ main_image.alt_text }}">
        {% else %}
          <img src="{% static 'images/image1.png' %}" alt="{{ shoe.name }}">
        {% endif %}
      </div>
      <div class="thumbnail-grid" style="display: flex; gap: 10px;">
        {% for image in shoe.images.all %}
          <img src="{{ image.image.url }}" alt="{{ image.alt_text }}" style="width: 100px; height: 100px; object-fit: cover;">
        {% empty %}
          <img src="{% static 'images/image1.png' %}" alt="Product view 1" style="width: 100px; height: 100px; object-fit: cover;">
          <img src="{% static 'images/image2.png' %}" alt="Product view 2" style="width: 100px; height: 100px; object-fit: cover;">
          <img src="{% static 'images/image3.png' %}" alt="Product view 3" style="width: 100px; height: 100px; object-fit: cover;">
        {% endfor %}
      </div>
    </div>

    <div class="product-info">
      <h1 class="product-title">{{ shoe.name }}</h1>
      <p class="product-price"> <b>Price:</b> ${{ shoe.price }}</p>
      <p class="product-brand"> <b>Brand:</b> {{ shoe.brand.name }}</p>
      <form method="post" action="#">
        {% csrf_token %}
        <input type="hidden" name="product_id" value="{{ shoe.shoe_id }}">
        
        <h2 class="section-title">Color Options</h2>
        <div class="color-options">
          {% if shoe.variants.all %}
            {% for variant in shoe.variants.all %}
            <div class="color-item">
              <input type="radio" id="color_{{ variant.color }}" name="selected_color" value="{{ variant.color}}" {% if forloop.first %}checked{% endif %} class="color-input">
              <label for="color_{{ variant.color }}" class="color-option">{{ variant.color }}</label>
            </div>
            {% endfor %}
          {% else %}
            <p>No color options available.</p>
          {% endif %}
        </div>

        <h2 class="section-title">Available Sizes</h2>
        <div class="variant-options">
          {% if shoe.variants.all %}
            {% for variant in shoe.variants.all %}
            <div class="variant-item">
              <input type="radio" id="variant_{{ variant.variant_id }}" name="variant" value="{{ variant.variant_id }}" {% if forloop.first %}checked{% endif %} class="variant-input">
              <label for="variant_{{ variant.variant_id }}" class="variant-option">{{ variant.color }} - Size {{ variant.size }} </label>
            </div>
            {% endfor %}
          {% else %}
            <p>No variants available for this product.</p>
          {% endif %}
        </div>
        <button type="submit" class="add-to-cart">Add to Cart</button>
      </form>
      <div class="product-description">
        <h2 class="section-title">Product Description</h2>
        <p>
        {{ shoe.description }}
        </p>
      </div>
    </div>
  </main>
</div>
{% endblock %}
